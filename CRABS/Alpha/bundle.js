if("function"!=typeof window.ImportBondageCollege)throw alert("Club not detected! Please only use this while you have Club open!"),"Dependency not met";if(void 0!==window.CRABS_Loaded)throw alert("CRABS is already detected in current window. To reload, please refresh the window."),"Already loaded";window.CRABS_Loaded=!1,console.debug("CRABS: Parse start..."),function(){"use strict";class Roster{constructor(icon_height,icon_width){this.ICONS={admin:"./icons/admin.svg",vip:"./icons/vip.svg",player:"./icons/player.svg",you:"./icons/you.svg",owner:"./icons/owner.svg",sub:"./icons/sub.svg",trial:"./icons/trial.svg",lover:"./icons/lover.svg",friend:"./icons/friends.svg",whitelist:"./icons/whitelist.svg",blacklist:"./icons/blacklist.svg",ghost:"./icons/ghost.svg"},this.icon_height=0,this.icon_width=0,this.showPlayerProfile=function(MemberNumber){const PLAYER=ChatRoomCharacter.find((C=>C.MemberNumber==MemberNumber));PLAYER?(ChatRoomStatusUpdate("Preference"),InformationSheetLoadCharacter(PLAYER)):ChatRoomSendLocal("This person is no longer in the room.")},this.showPlayerFocus=function(MemberNumber){const PLAYER=ChatRoomCharacter.find((C=>C.MemberNumber==MemberNumber));PLAYER?(ChatRoomStatusUpdate("Preference"),ChatRoomFocusCharacter(PLAYER)):ChatRoomSendLocal("This person is no longer in the room.")},this.icon_height=icon_height,this.icon_width=icon_width}printicon(key){let ICON="./icons/error.svg";key in this.ICONS&&(ICON=this.ICONS[key]);let html="";return html+="<img ",html+="height="+this.icon_height+"' ",html+="width='"+this.icon_width+"' ",html+="alt='"+key+"' ",html+="src='"+ICON+"'",html+=">",html}showhelp(){return`<table style="width: 100%"><tr><td>\n            <span style=" text-shadow: 0px 0px 3px #000000; white-space: normal;">\n            </br>\n            <hr>\n            /player help sheet</br>\n            This command lists the number of admins and players </br>\n            in a room and gives you some informatoin about them </br>\n\n            </br>\n            Arguments:\n            <hr>\n            help - show this menu </br>\n            count - show only the player count </br>\n            admins - show only a list of admins and the counts </br>\n            vips - show only room whitelisted and the counts </br>\n\n            </br>\n            Badges:\n            <hr>\n            ${printicon("admin")} = Person is Admin</br>\n            ${printicon("vip")} = Person is whitelisted in the room </br>\n            ${printicon("player")} = Person is a normal user </br>\n\n            </br>\n            Icons:\n            <hr>\n            ${printicon("you")} = Person is you </br>\n            ${printicon("owner")} = Person is your owner </br>\n            ${printicon("sub")} = Person is your submissive </br>\n            ${printicon("trial")} = Person is on trial with you </br>\n            ${printicon("lover")} = Person is your lover </br>\n            ${printicon("friend")} = Person is a friend </br>\n            ${printicon("whitelist")} = You have this person whitelisted </br>\n            ${printicon("blacklist")} = You have this person blacklisted </br>\n            ${printicon("ghost")} = You have ghosted this person </br>\n\n            </br>\n            Actions:\n            <hr>\n            Click Badge - If you click the badge for a player it will be as if you clicked them to interact. </br>\n            Click name - If you click the name/number of a player it will whisper them without range constraints. </br>\n            </span>\n            </td>\n            </tr>\n            </table>`}formatoutput(player,badge,player_icons,isMe){CharacterNickname(player);let output=`<tr>\n                <td style="padding-left: 5px; padding-right-5px; padding-bottom: 1px; padding-top: 0;"><span style="cursor:pointer;" onclick="showPlayerFocus(${player.MemberNumber})">${badge}</span></td>`;return output+=isMe?`<td style="padding-left: 5px; padding-right-5px; padding-bottom: 1px; padding-top: 0;"><span style="color:${player.LabelColor||"#000000"};\n                    font-family: Arial, sans-serif;\n                    text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.7); white-space: nowrap;">\n                      ${CharacterNickname(player).normalize("NFKC")}[${player.MemberNumber}]\n                  </span>${player_icons}</td>\n              </tr>`:`<td style="padding-left: 5px; padding-right-5px; padding-bottom: 1px; padding-top: 0;"><span style="color:${player.LabelColor||"#000000"}; cursor:pointer;\n                    font-family: Arial, sans-serif;\n                    text-shadow: 2px 2px 2px rgba(0, 0, 0, 0.7); white-space: nowrap;"\n                    onclick="sendWhisper(${player.MemberNumber})"\n                    onmouseover="this.style.textDecoration='underline';"\n                    onmouseout="this.style.textDecoration='none';">\n                      ${CharacterNickname(player).normalize("NFKC")}[${player.MemberNumber}]\n                  </span>${player_icons}</td>\n              </tr>`,output}setbadge(player){let badge=this.printicon("player");return badge=ChatRoomData.Whitelist.includes(player.MemberNumber)?this.printicon("vip"):badge,badge=ChatRoomData.Admin.includes(player.MemberNumber)?this.printicon("admin"):badge,badge}setIcons(player){let player_icons="";return Player.OwnerNumber()==player.MemberNumber?player_icons+=this.printicon("owner")+" ":Player.IsInFamilyOfMemberNumber(player.MemberNumber)&&(Player.IsOwnedByPlayer(player.membernumber)?player_icons+=this.printicon("sub")+" ":player_icons+=this.printicon("trial")+" "),Player.GetLoversNumbers().includes(player.MemberNumber)&&(player_icons+=this.printicon("lover")+" "),Player.FriendList.includes(player.MemberNumber)&&(player_icons+=this.printicon("friend")+" "),Player.WhiteList.includes(player.MemberNumber)&&(player_icons+=this.printicon("whitelist")+" "),Player.BlackList.includes(player.MemberNumber)&&(player_icons+=this.printicon("blacklist")+" "),Player.GhostList.includes(player.MemberNumber)&&(player_icons+=this.printicon("ghost")+" "),player_icons}checkIfMe(player){return player.MemberNumber==Player.MemberNumber}}bcModSdk.registerMod({name:"CRABS",fullName:"Crazy Roster Add-on By Sin",version:"1.0.0",repository:"https://github.com/sin-1337/CRABS"});ChatRoomRegisterMessageHandler({Description:"Send room stats on entry.",Priority:0,Callback:data=>("Action"===data.Type&&"ServerEnter"===data.Content&&data.Sender===Player.MemberNumber&&setTimeout((()=>{if(null===Player.LastChatRoom)return!1;const currentPermissionText=`${TextGetInScope("Screens/Character/InformationSheet/Text_InformationSheet.csv","PermissionLevel"+Player.ItemPermission.toString())} (${Player.ItemPermission})`;ChatRoomSendLocal(`\n                  <hr>\n                  <div style="padding-left: 5px; padding-right-5px; padding-bottom: 1px; padding-top: 0;">\n                    <span style="display: inline; margin: 0; padding: 0; line-height: 1; color: #5BA3E0; font-weight: bold;">Player Item Permission: </span>\n                    <span style="display: inline; margin: 0; padding: 0; line-height: 1; color: ${Player.LabelColor}; font-weight: bold; text-shadow: 0 0 1px black;">${currentPermissionText}</span>\n                    <span style="display: inline; margin: 0; padding: 0; line-height: 1; color: #5BA3E0; font-weight: bold;">&nbsp;</span>\n                  </div>\n                `),ChatRoomSendLocal("<div>Room details for: "+ChatRoomData.Name+"</div>");for(let index in Commands)if(index=parseInt(index),"players"===Commands[index].Tag){Commands[index].Action("count");break}ChatRoomSendLocal("<div>To see the full roster use /players</div><hr>")}),3600),!1)}),CommandCombine([{Tag:"whisper+",Description:"Enables the /whisper+ command that is global to a map room",Action:args=>{const MEMBERNUMBER=parseInt(args.slice(0,args.indexOf(" ")));let message=args.slice(args.indexOf(" ")+1);if(console.log(message),Number.isNaN(MEMBERNUMBER))return ChatRoomSendLocal("Member number is invalid."),1;if(""==message)return ChatRoomSendLocal("Message was blank"),1;const WHISPERPLUS=new WhiserPlus,TARGET=ChatRoomCharacter.find((C=>C.MemberNumber==MEMBERNUMBER));WHISPERPLUS.ChatRoomSendWhisperRanged(TARGET,message)}}]),CommandCombine([{Tag:"players",Description:"Show the player count, helpful in maps.",Action:args=>{const SPLITARGS=args.split(" "),ROSTER=new Roster(25,25);if("help"==SPLITARGS[0].toLowerCase())return void ChatRoomSendLocal(ROSTER.showhelp());let player,me_output_html="",admin_output_html="",vip_output_html="",player_output_html="",admin_count=0,badge="",player_icons="",showme=!0,showadmins=!0,showvip=!0,showplayers=!0;for(let person in ChatRoomData.Character)if(MemberNumber=ChatRoomData.Character[person].MemberNumber,player=ChatRoomCharacter.find((C=>C.MemberNumber==MemberNumber)),player)if(badge=ROSTER.setbadge(player),player_icons=ROSTER.setIcons(player),checkIfMe(player)&&(player_icons="⭐ "+player_icons,me_output_html=ROSTER.formatoutput(player,badge,player_icons,!0)),ChatRoomData.Admin.includes(player.MemberNumber)){if(admin_count++,!ROSTER.checkIfMe(player,Player)){admin_output_html+=ROSTER.formatoutput(player,badge,player_icons,!1);continue}}else{if(ChatRoomData.Whitelist.includes(player.MemberNumber)&&!ROSTER.checkIfMe(player,Player)){vip_output_html+=ROSTER.formatoutput(player,badge,player_icons,!1);continue}ROSTER.checkIfMe(player)||(player_output_html+=ROSTER.formatoutput(player,badge,player_icons,!1))}else player_output_html+="❓ <span style='color:#FF0000'>[Unknown Person]</span>\n";SPLITARGS.some((item=>"count"===item.toLowerCase()))&&(console.log("count only"),showme=!1,showadmins=!1,showvip=!1,showplayers=!1),SPLITARGS.some((item=>"admins"===item.toLowerCase()))&&(console.log("admins only"),showme=!1,showvip=!1,showplayers=!1),SPLITARGS.some((item=>"vips"===item.toLowerCase()))&&(console.log("vips only"),showme=!1,showadmins=!1,showplayers=!1),ChatRoomSendLocal("<div>There are "+admin_count+"/"+ChatRoomData.Admin.length+" admins in the room.</div>"),ChatRoomSendLocal("There are "+ChatRoomCharacter.length+"/"+ChatRoomData.Limit+" total players in the room.</div>");let output_html="";output_html+='<table style="border: 0px;">',output_html=showme?output_html+me_output_html:output_html,output_html=showadmins?output_html+admin_output_html:output_html,output_html=showvip?output_html+vip_output_html:output_html,output_html=showplayers?output_html+player_output_html:output_html,output_html+="</table>",ChatRoomSendLocal(output_html)}}])}();
//# sourceMappingURL=bundle.js.map
